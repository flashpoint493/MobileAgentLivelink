# PC 服务启动指南

## 步骤 1: 安装依赖

由于网络问题，如果 `pip install` 失败，可以尝试以下方法：

### 方法 1: 使用国内镜像源（推荐）
```powershell
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn
```

### 方法 2: 手动安装每个包
```powershell
pip install websockets -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install pyautogui -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install pygetwindow -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install pynput -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install python-dotenv -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install pyperclip  # 注意：这个包在 requirements.txt 中缺失，但代码需要
```

### 方法 3: 如果网络正常，直接安装
```powershell
pip install -r requirements.txt
```

## 步骤 2: 配置（可选）

编辑 `config.py` 或设置环境变量：

- `RELAY_SERVER_URL`: 中继服务器地址（默认: `ws://localhost:8765/ws`）
- `DEVICE_ID`: 设备ID（默认: `default-pc`）
- `AUTH_TOKEN`: 认证令牌（可选）

## 步骤 3: 启动服务

```powershell
cd pc-client
python relay_client.py
```

## 注意事项

1. **确保 Cursor IDE 已安装并运行**
   - PC 服务需要找到 Cursor 窗口才能工作
   - 窗口标题应该包含 "Cursor"

2. **中继服务器地址**
   - 本地测试：使用 `ws://localhost:8765/ws`
   - 生产环境：需要部署中继服务器到公网，然后修改配置

3. **防火墙设置**
   - 确保允许 Python 访问网络

4. **依赖问题**
   - 如果遇到 `ModuleNotFoundError`，说明依赖未安装成功
   - 检查 `pip list` 确认所有包都已安装

## 故障排查

- **连接失败**: 检查中继服务器是否运行，URL 是否正确
- **找不到 Cursor 窗口**: 确保 Cursor IDE 已打开
- **导入错误**: 重新安装缺失的依赖包


